{"ast":null,"code":"var _jsxFileName = \"/Users/mmevansjr/dev/mod5/frontend/src/components/PlayerView/PlayerView.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport io from 'socket.io-client';\nimport { setStage, updateAnswersForVoting } from '../../actions/gameActions';\nimport { getPlayerInfo, addPlayerAnswers, updateAnswersToState } from '../../actions/playerActions';\nconst ENDPOINT = 'localhost:3000';\nlet socket = io(ENDPOINT);\nexport const PlayerView = props => {\n  const dispatch = useDispatch();\n  const room = useSelector(state => state.joinRoom.room_id);\n  const stage = useSelector(state => state.game.stage);\n  const playerName = useSelector(state => state.joinRoom.name);\n  const prompt1 = useSelector(state => state.player.prompt1);\n  const prompt2 = useSelector(state => state.player.prompt2);\n  const prompt3 = useSelector(state => state.player.prompt3);\n  const prompt4 = useSelector(state => state.player.prompt4);\n  const prompt5 = useSelector(state => state.player.prompt5);\n  const prompt6 = useSelector(state => state.player.prompt6);\n  const answers_round_1 = useSelector(state => state.player.answers_round_1);\n  const answers_round_2 = useSelector(state => state.player.answers_round_2);\n  const answers_round_3 = useSelector(state => state.player.answers_round_3);\n  const questions_round_1 = useSelector(state => state.game.questions_round_1);\n  const selectedQuestion = useSelector(state => state.game.selectedQuestion);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      dispatch(setStage());\n      dispatch(getPlayerInfo(playerName, room));\n    }, 5000);\n    socket.on('init-voting-round-1', ({\n      allPlayersInGame,\n      selectedQuestion\n    }) => {\n      dispatch(updateAnswersForVoting(allPlayersInGame, selectedQuestion));\n    });\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (stage === 2) {\n      dispatch(updateAnswersToState(e.target[0].value, stage));\n      debugger;\n      dispatch(setStage());\n      e.target.reset();\n    }\n\n    if (stage === 3) {\n      dispatch(updateAnswersToState(e.target[0].value, stage));\n      dispatch(setStage());\n      debugger;\n    }\n  };\n\n  useEffect(() => {\n    if (stage === 4) {\n      dispatch(addPlayerAnswers(playerName, room, stage, answers_round_1));\n    }\n  });\n  socket.on('ready-to-vote', () => {\n    dispatch(setStage());\n  });\n\n  if (stage === 1) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Get Ready!\"));\n  }\n\n  if (stage === 2) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, prompt1 !== undefined ? prompt1 : null), React.createElement(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      row: \"4\",\n      cols: \"50\",\n      name: \"answer1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n  if (stage === 3) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, prompt2 !== undefined ? prompt2 : null), React.createElement(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      row: \"4\",\n      cols: \"50\",\n      name: \"answer2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n  if (stage === 4) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Waiting on other players...\"));\n  }\n\n  if (stage === 5) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Voting Screen\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, questions_round_1.answers.map((answer, index) => React.createElement(\"button\", {\n      onClick: e => console.log(answer),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \" \", index + 1, \" \"))));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"Get Ready!\"));\n};\nexport default PlayerView;","map":{"version":3,"sources":["/Users/mmevansjr/dev/mod5/frontend/src/components/PlayerView/PlayerView.js"],"names":["React","useEffect","useDispatch","useSelector","io","setStage","updateAnswersForVoting","getPlayerInfo","addPlayerAnswers","updateAnswersToState","ENDPOINT","socket","PlayerView","props","dispatch","room","state","joinRoom","room_id","stage","game","playerName","name","prompt1","player","prompt2","prompt3","prompt4","prompt5","prompt6","answers_round_1","answers_round_2","answers_round_3","questions_round_1","selectedQuestion","timer","setTimeout","on","allPlayersInGame","clearTimeout","handleSubmit","e","preventDefault","target","value","reset","undefined","answers","map","answer","index","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAAQC,QAAR,EAAkBC,sBAAlB,QAA+C,2BAA/C;AACA,SAAQC,aAAR,EAAuBC,gBAAvB,EAAyCC,oBAAzC,QAAoE,6BAApE;AAGA,MAAMC,QAAQ,GAAG,gBAAjB;AACA,IAAIC,MAAM,GAAGP,EAAE,CAACM,QAAD,CAAf;AAEA,OAAO,MAAME,UAAU,GAAIC,KAAD,IAAW;AAEjC,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAMa,IAAI,GAAGZ,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeC,OAAzB,CAAxB;AACA,QAAMC,KAAK,GAAGhB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACI,IAAN,CAAWD,KAArB,CAAzB;AACA,QAAME,UAAU,GAAGlB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACC,QAAN,CAAeK,IAAzB,CAA9B;AACA,QAAMC,OAAO,GAAGpB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaD,OAAvB,CAA3B;AACA,QAAME,OAAO,GAAGtB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaC,OAAvB,CAA3B;AACA,QAAMC,OAAO,GAAGvB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaE,OAAvB,CAA3B;AACA,QAAMC,OAAO,GAAGxB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaG,OAAvB,CAA3B;AACA,QAAMC,OAAO,GAAGzB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaI,OAAvB,CAA3B;AACA,QAAMC,OAAO,GAAG1B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaK,OAAvB,CAA3B;AACA,QAAMC,eAAe,GAAG3B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaM,eAAvB,CAAnC;AACA,QAAMC,eAAe,GAAG5B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaO,eAAvB,CAAnC;AACA,QAAMC,eAAe,GAAG7B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACQ,MAAN,CAAaQ,eAAvB,CAAnC;AAEA,QAAMC,iBAAiB,GAAG9B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACI,IAAN,CAAWa,iBAArB,CAArC;AACA,QAAMC,gBAAgB,GAAG/B,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACI,IAAN,CAAWc,gBAArB,CAApC;AAEAjC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMkC,KAAK,GAAGC,UAAU,CAAC,MAAM;AAC/BtB,MAAAA,QAAQ,CAACT,QAAQ,EAAT,CAAR;AACAS,MAAAA,QAAQ,CAACP,aAAa,CAACc,UAAD,EAAaN,IAAb,CAAd,CAAR;AACC,KAHuB,EAGrB,IAHqB,CAAxB;AAMAJ,IAAAA,MAAM,CAAC0B,EAAP,CAAU,qBAAV,EAAiC,CAAC;AAAEC,MAAAA,gBAAF;AAAoBJ,MAAAA;AAApB,KAAD,KAA4C;AACzEpB,MAAAA,QAAQ,CAACR,sBAAsB,CAACgC,gBAAD,EAAmBJ,gBAAnB,CAAvB,CAAR;AACH,KAFD;AAKA,WAAO,MAAMK,YAAY,CAACJ,KAAD,CAAzB;AACD,GAbM,EAaJ,EAbI,CAAT;;AAeA,QAAMK,YAAY,GAAIC,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAGvB,KAAK,KAAK,CAAb,EAAgB;AACZL,MAAAA,QAAQ,CAACL,oBAAoB,CAACgC,CAAC,CAACE,MAAF,CAAS,CAAT,EAAYC,KAAb,EAAoBzB,KAApB,CAArB,CAAR;AACA;AACAL,MAAAA,QAAQ,CAACT,QAAQ,EAAT,CAAR;AACAoC,MAAAA,CAAC,CAACE,MAAF,CAASE,KAAT;AACH;;AACD,QAAG1B,KAAK,KAAK,CAAb,EAAgB;AACZL,MAAAA,QAAQ,CAACL,oBAAoB,CAACgC,CAAC,CAACE,MAAF,CAAS,CAAT,EAAYC,KAAb,EAAoBzB,KAApB,CAArB,CAAR;AACAL,MAAAA,QAAQ,CAACT,QAAQ,EAAT,CAAR;AACA;AACH;AACJ,GAbD;;AAeAJ,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGkB,KAAK,KAAK,CAAb,EAAgB;AACZL,MAAAA,QAAQ,CAACN,gBAAgB,CAACa,UAAD,EAAaN,IAAb,EAAmBI,KAAnB,EAA0BW,eAA1B,CAAjB,CAAR;AACH;AACJ,GAJQ,CAAT;AAMAnB,EAAAA,MAAM,CAAC0B,EAAP,CAAU,eAAV,EAA2B,MAAM;AAC7BvB,IAAAA,QAAQ,CAACT,QAAQ,EAAT,CAAR;AACH,GAFD;;AAIA,MAAGc,KAAK,KAAK,CAAb,EAAgB;AACZ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,CADJ;AAKH;;AACD,MAAGA,KAAK,KAAK,CAAb,EAAgB;AACZ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKI,OAAO,KAAKuB,SAAZ,GAAwBvB,OAAxB,GAAkC,IAAvC,CADJ,EAEI;AAAM,MAAA,QAAQ,EAAGkB,CAAD,IAAOD,YAAY,CAACC,CAAD,CAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAU,MAAA,GAAG,EAAC,GAAd;AAAkB,MAAA,IAAI,EAAC,IAAvB;AAA4B,MAAA,IAAI,EAAC,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,CAFJ,CADJ;AAUH;;AACD,MAAGtB,KAAK,KAAK,CAAb,EAAgB;AACZ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKM,OAAO,KAAKqB,SAAZ,GAAwBrB,OAAxB,GAAkC,IAAvC,CADC,EAEA;AAAM,MAAA,QAAQ,EAAGgB,CAAD,IAAOD,YAAY,CAACC,CAAD,CAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAU,MAAA,GAAG,EAAC,GAAd;AAAkB,MAAA,IAAI,EAAC,IAAvB;AAA4B,MAAA,IAAI,EAAC,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,CAFA,CADJ;AAUH;;AACD,MAAGtB,KAAK,KAAK,CAAb,EAAgB;AACZ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADJ,CADJ;AAKH;;AACD,MAAGA,KAAK,KAAK,CAAb,EAAgB;AACZ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKc,iBAAiB,CAACc,OAAlB,CAA0BC,GAA1B,CAA+B,CAACC,MAAD,EAASC,KAAT,KAC5B;AAAQ,MAAA,OAAO,EAAGT,CAAD,IAAOU,OAAO,CAACC,GAAR,CAAYH,MAAZ,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA+CC,KAAK,GAAG,CAAvD,MADH,CADL,CAFJ,CADJ;AAUH;;AACD,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,CADJ;AAKH,CAlHM;AAoHP,eAAetC,UAAf","sourcesContent":["import React, {useEffect} from 'react'\nimport {useDispatch, useSelector} from 'react-redux';\nimport io from 'socket.io-client';\nimport {setStage, updateAnswersForVoting} from '../../actions/gameActions'\nimport {getPlayerInfo, addPlayerAnswers, updateAnswersToState} from '../../actions/playerActions'\n\n\nconst ENDPOINT = 'localhost:3000'\nlet socket = io(ENDPOINT)\n\nexport const PlayerView = (props) => {\n\n    const dispatch = useDispatch();\n    const room = useSelector(state => state.joinRoom.room_id)\n    const stage = useSelector(state => state.game.stage);\n    const playerName = useSelector(state => state.joinRoom.name)\n    const prompt1 = useSelector(state => state.player.prompt1)\n    const prompt2 = useSelector(state => state.player.prompt2)\n    const prompt3 = useSelector(state => state.player.prompt3)\n    const prompt4 = useSelector(state => state.player.prompt4)\n    const prompt5 = useSelector(state => state.player.prompt5)\n    const prompt6 = useSelector(state => state.player.prompt6)\n    const answers_round_1 = useSelector(state => state.player.answers_round_1)\n    const answers_round_2 = useSelector(state => state.player.answers_round_2)\n    const answers_round_3 = useSelector(state => state.player.answers_round_3)\n\n    const questions_round_1 = useSelector(state => state.game.questions_round_1)\n    const selectedQuestion = useSelector(state => state.game.selectedQuestion)\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n        dispatch(setStage())\n        dispatch(getPlayerInfo(playerName, room))\n        }, 5000);\n\n\n        socket.on('init-voting-round-1', ({ allPlayersInGame, selectedQuestion }) => {\n            dispatch(updateAnswersForVoting(allPlayersInGame, selectedQuestion))\n        })\n\n\n        return () => clearTimeout(timer);\n      }, []);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        if(stage === 2) {\n            dispatch(updateAnswersToState(e.target[0].value, stage))\n            debugger\n            dispatch(setStage())\n            e.target.reset()\n        }\n        if(stage === 3) {\n            dispatch(updateAnswersToState(e.target[0].value, stage))\n            dispatch(setStage())\n            debugger\n        }\n    }\n\n    useEffect(() => {\n        if(stage === 4) {\n            dispatch(addPlayerAnswers(playerName, room, stage, answers_round_1))\n        }\n    })\n\n    socket.on('ready-to-vote', () => { \n        dispatch(setStage())\n    })\n\n    if(stage === 1) {\n        return (\n            <div>\n                <h1>Get Ready!</h1>\n            </div>\n        )\n    }\n    if(stage === 2) {\n        return (\n            <div>\n                <h1>{prompt1 !== undefined ? prompt1 : null}</h1>\n                <form onSubmit={(e) => handleSubmit(e)}>\n                    <textarea row='4' cols='50' name='answer1'>\n                    </textarea>\n                    <button >Submit</button>\n                </form>\n            </div>\n        )  \n    }\n    if(stage === 3) {\n        return (\n            <div>\n           <h1>{prompt2 !== undefined ? prompt2 : null}</h1>\n            <form onSubmit={(e) => handleSubmit(e)}>\n                <textarea row='4' cols='50' name='answer2'>\n                </textarea>\n                <button>Submit</button>\n            </form>\n        </div> \n        )\n    }\n    if(stage === 4) {\n        return (\n            <div>\n                <h2>Waiting on other players...</h2>\n            </div>\n        )\n    }\n    if(stage === 5) {\n        return (\n            <div>\n                <h1>Voting Screen</h1>\n                <div>\n                    {questions_round_1.answers.map( (answer, index) => (\n                        <button onClick={(e) => console.log(answer)}> {index + 1} </button>\n                    ))}\n                </div>\n            </div>\n        )\n    }\n    return (\n        <div>\n            <h1>Get Ready!</h1> \n        </div>\n    )\n}\n\nexport default PlayerView"]},"metadata":{},"sourceType":"module"}